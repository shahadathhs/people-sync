model User {
  id String @id @default(uuid())

  email      String   @unique
  username   String   @unique // auto-generated, updatable once
  employeeId BigInt   @unique @default(autoincrement()) // auto-increment employee number
  password   String // hashed password 
  role       UserRole @default(EMPLOYEE)

  name      String? @default("Unnamed User")
  avatarUrl String? @default("https://www.gravatar.com/avatar/000000000000000000000000000000?d=mp&f=y")

  // Logout tracking
  isLoggedIn   Boolean   @default(false)
  lastLoginAt  DateTime?
  lastLogoutAt DateTime?

  // Account Status
  isActive          Boolean @default(true)
  isBanned          Boolean @default(false)
  isUsernameUpdated Boolean @default(false)

  // Chats
  privateMessage                 PrivateMessage[]
  privateMessageStatus           PrivateMessageStatus[]
  privateCallInitiator           PrivateCall[]
  privateConversationParticipant PrivateConversationParticipant[]
  privateCallParticipant         PrivateCallParticipant[]

  // Notifications
  notifications UserNotification[]

  // Refresh Tokens
  refreshTokens RefreshToken[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@index([role])
  @@index([isActive, isBanned])
  @@map("users")
}

enum UserRole {
  SUPER_ADMIN
  ADMIN
  EMPLOYEE
  OWNER
}
